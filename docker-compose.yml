services:
  fluxarr:
    build: .
    container_name: fluxarr
    restart: unless-stopped
    ports:
      - '3001:3000'
    volumes:
      # Persist database (bind mount to local directory)
      - ./data:/app/data
    environment:
      - NODE_ENV=production
      - PORT=3000
      - HOST=0.0.0.0
      - DATABASE_PATH=/app/data/fluxarr.db
    healthcheck:
      test:
        ['CMD', 'wget', '--no-verbose', '--tries=1', '--spider', 'http://127.0.0.1:3000/api/health']
      interval: 30s
      timeout: 3s
      start_period: 10s
      retries: 3
    networks:
      - hf_proxy_network
networks:
  hf_proxy_network:
    external: true
